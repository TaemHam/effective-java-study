# 아이템 42. 익명 클래스보다는 람다를 사용하라

## Java 8부터 도입된 람다식

- 자바 8부터 익명 클래스를 단순화하여 작성할 수 있는 람다식을 도입하였다.

<br>

### 자바의 익명 클래스란?

- Java의 익명 클래스란 일회성으로 사용하는 클래스가 있을 때, 별도의 클래스 파일을 작성하지 않고 사용 시에 선언하는 방법을 의미한다.

  ```java
  Collections.sort(words, new Comparator<String>() {

      @Override
      public int compare(String o1, String o2) {
          return Integer.compare(o1.length(), o2.length());
      }
  });
  ```

<br>

### 자바의 람다식이란?

- 자바의 람다식이란 위에서 설명하였듯이 익명 클래스를 더욱 단순하게 작성할 수 있는 방법을 의미한다.

<br>

#### 람다식의 특징

- 익명 → 람다는 이름이 없다. (보통의 메서드는 메서드명을 가지고 있는 것과 반대이다.)
- 함수 → 람다는 특정 클래스에 종속되지 않으므로 메서드가 아닌 함수이다.
- 전달 → 람다 표현식을 메서드 인수로 전달하거나 (익명 클래스를 단순화 한 것이니까) 변수로 저장할 수 있다.
- 간결성 → 익명 클래스처럼 복잡하지 않다.

<br>

#### 람다식의 구조

- 람다식의 구조는 3가지로 이루어져있다.

  - `(param1, param2)` → `param1 > param2`

  - 파라미터 리스트 → 람다식에 전달할 파라미터를 작성하며, 1개인 경우 괄호를 생략할 수 있다.
  - 화살표 → 람다식의 파라미터를 바디에 전달할 때 화살표를 써준다.
  - 람다 바디 → 파라미터 리스트를 전달받아 람다식으로 처리할 로직을 구현하는 부분이다. 1줄인 경우 중괄호를 생략하여 리턴할 수 있다.

<br>

#### 람다식의 타입 추론

- 아래의 코드는 익명 클래스를 활용하여 Comparator 구현체를 전달하는 것이 아닌 람다식을 사용하여 전달하고 있다.

  ```java
  Collections.sort(words, (s1, s2) -> Integer.compare(s1.length(), s2.length()));
  ```

- 람다식의 파라미터 리스트, 람다 바디에는 타입 선언을 위한 Integer나 String이 작성되어있지 않지만 컴파일러가 타입 추론을 하여 타입을 결정한다.

<br>

## 람다와 익명 클래스

- 모든 익명 클래스를 람다 식으로 대체할 수 있을까? 정답은 아니오이다. 익명 클래스로 사용하려는 클래스의 상위 타입이 오직 1개의 메서드만 가지고 있거나 함수형 인터페이스인 경우에는 람다식으로 대체할 수 있지만, 그렇지 않은 경우는 익명 클래스를 사용해야 한다.

<br>

## 람다식을 사용할 때 주의점

- 모든 코드를 무조건 람다식으로 변경하는 것은 좋지 않다. 람다식으로 변경했을 때 더욱 복잡하게 느껴진다면 람다식을 쓰지 말아야 한다.

- 람다는 자기 자신을 참조할 수 없으며, 람다식에서 this를 사용하면 그 람다식을 사용하는 바깥 인스턴스를 가리키게 된다. (따라서 함수 객체가 자기 자신을 참조해야 한다면 익명 클래스를 써야 한다.)

- 람다식을 직렬화 할 때는 직렬화 형태가 가상머신 별로 다를 수도 있으니 주의해야 한다.

  [람다식을 serialize 하는 방법](https://stackoverflow.com/questions/22807912/how-to-serialize-a-lambda)

<br>

## 람다식은 익숙해질 때까지 공부하자

- 람다식을 공부할 때 `모던 자바 인 액션` 도서가 굉장히 잘 되어있으므로 한번 쯤 학습해보자.
