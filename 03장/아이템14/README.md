# ì•„ì´í…œ 14. comparableì„ êµ¬í˜„í• ì§€ ê³ ë ¤í•˜ë¼.

### Comparable ì¸í„°í˜ì´ìŠ¤ëŠ” ê°ì²´ ê°„ ë¹„êµí•˜ëŠ” ë°©ë²•ì„ ì œê³µí•œë‹¤.
- Comparable ì¸í„°í˜ì´ìŠ¤ì˜ compareTo ë©”ì†Œë“œëŠ” ë‹¨ìˆœ ë™ì¹˜ì„± ë¹„êµì— ë”í•´ ìˆœì„œê¹Œì§€ ë¹„êµí•  ìˆ˜ ìˆë‹¤.

  ```java
  // ì•ì˜ aì™€ ë’¤ì˜ aê°€ ê°™ë‹ˆ? (ë™ì¹˜ì„± ë¹„êµ)
  // ê°™ë‹¤ -> 0 ë°˜í™˜
  System.out.println("a".compareTo("a")); // 0 ë°˜í™˜

  // ì•ì˜ aì™€ ë’¤ì˜ bê°€ ê°™ë‹ˆ?
  // ë‹¤ë¥´ë‹¤ -> ê·¸ëŸ¼ ì•ì˜ aê°€ ë’¤ì˜ bë³´ë‹¤ ìˆœì„œê°€ ë¹ ë¥´ë‹ˆ? (ìˆœì„œ ë¹„êµ)
  // ëŠë¦¬ë‹¤ -> -1
  System.out.println("a".compareTo("b")); // -1 ë°˜í™˜

  // ì•ì˜ aì™€ ë’¤ì˜ bê°€ ê°™ë‹ˆ?
  // ë‹¤ë¥´ë‹¤ -> ê·¸ëŸ¼ ì•ì˜ bê°€ ë’¤ì˜ aë³´ë‹¤ ìˆœì„œê°€ ë¹ ë¥´ë‹ˆ? (ìˆœì„œ ë¹„êµ)
  // ë¹ ë¥´ë‹¤ -> 1 ë°˜í™˜
  System.out.println("b".compareTo("a")); // 1 ë°˜í™˜
  ```

  > ğŸ“Œ **Comparableì˜ compareToë¥¼ êµ¬í˜„í•œë‹¤ë©´ ë¦¬í„´ê°’ì€ ë§˜ëŒ€ë¡œ ì¤„ ìˆ˜ ìˆë‹¤.**
  > - ë°˜ë“œì‹œ 0, -1, 1 ì¤‘ í•˜ë‚˜ë¥¼ ë°˜í™˜í•´ì•¼ í•˜ëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤.

  > - `ë™ì¹˜ì„±, ìˆœì„œê°€ ë¹ ë¦„, ìˆœì„œê°€ ëŠë¦¼` ì˜ 3ê°€ì§€ ìƒíƒœë§Œ ë‚˜íƒ€ë‚¼ ìˆ˜ ìˆëŠ” êµ¬ë¶„ê°’ì´ë©´ ëœë‹¤.
  
  > - ê·¸ëŸ¬ë‚˜ Comparableì„ êµ¬í˜„í•˜ëŠ” ì¼ë°˜ ê·œì•½ì´ ìˆìœ¼ë‹ˆ ë˜ë„ë¡ì´ë©´ ê·œì•½ì„ ë”°ë¥´ë„ë¡ í•˜ì.

<br>

### ìë°”ì˜ ëŒ€ë¶€ë¶„ì˜ í´ë˜ìŠ¤ì™€ ì—´ê±°íƒ€ì…ì€ ì´ë¯¸ Comparableì„ êµ¬í˜„í•´ ë†“ì•˜ë‹¤.

- Arrays.sort() ë¥¼ ì‚¬ìš©í•´ ì •ë ¬ ì‹œ compareTo ë©”ì†Œë“œê°€ ì‚¬ìš©ëœë‹¤.

- Arrays.sort()ë¥¼ ì‚¬ìš©í•˜ì—¬ ë°°ì—´ì˜ ì¼ë¶€ë§Œ ì •ë ¬í•  ìˆ˜ ìˆë‹¤.

- Comparatorë‚˜ Collections ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ í´ë˜ìŠ¤ì—ì„œ Comparableì„ êµ¬í˜„í•˜ì§€ ì•Šê³ ë„ ë¹„êµí•  ìˆ˜ ìˆë‹¤.
  
  
  ```java
  int[] arr = {1, 2, 3, 4, 5};

  // int ë°°ì—´ ì •ìˆœ ì •ë ¬
  Arrays.sort(arr);

  // int ë°°ì—´ ì—­ìˆœ ì •ë ¬ (boxingì´ ë˜ì–´ì•¼ APIë¡œ ì²˜ë¦¬ ê°€ëŠ¥, ì´í›„ int[] ë°°ì—´ë¡œ ë‹¤ì‹œ ë³€í™˜í•´ì¤˜ì•¼ í•¨)
  List<Integer> list = Arrays.asList(arr);

  Collections.reverse(list);

  // int ë°°ì—´ ì—­ìˆœ ì •ë ¬ (stream ì´ìš©)
  Arrays.stream(list)
			.boxed()
			.sorted(Comparator.reverseOrder())
			.mapToInt(Integer::intValue)
			.toArray();


  // ìš°ì„ ìˆœìœ„ íë¡œ ìµœëŒ€ í™ êµ¬í˜„
  PriorityQueue<Integer> queue = new PriorityQueue<>(Comparator.reverseOrder());
  ```

<br>

### Comparableì˜ ì¼ë°˜ ê·œì•½

> ğŸ“Œ **ê·œì•½ì„ ì½ê¸° ì „ ì°¸ê³ ì‚¬í•­**
  > - `ì´ ê°ì²´`ë€ compareToë¥¼ í˜¸ì¶œí•˜ëŠ” ê°ì²´ì´ë©°, `ì£¼ì–´ì§„ ê°ì²´`ë€ compareToì— íŒŒë¼ë¯¸í„°ë¡œì¨ ì „ë‹¬ë˜ëŠ” ê°ì²´ë¥¼ ì˜ë¯¸í•œë‹¤.
  >   - `[ì´ ê°ì²´]`.compareTo(`[ì£¼ì–´ì§„ ê°ì²´]`)
  > - sgn (í‘œí˜„ì‹) í‘œê¸°ëŠ” ìˆ˜í•™ì—ì„œ ë§í•˜ëŠ” ë¶€í˜¸ë¥¼ ëœ»í•˜ë©° í‘œí˜„ì‹ì˜ ê°’ì´ ìŒìˆ˜, 0, ì–‘ìˆ˜ì¼ ë•Œ -1, 0, 1ì„ ë°˜í™˜í•˜ë„ë¡ ì •ì˜í–ˆë‹¤.

- ì´ ê°ì²´ì™€ ì£¼ì–´ì§„ ê°ì²´ì˜ ìˆœì„œë¥¼ ë¹„êµí•œë‹¤. ì´ ê°ì²´ê°€ ì£¼ì–´ì§„ ê°ì²´ë³´ë‹¤ ì‘ìœ¼ë©´ ìŒì˜ ì •ìˆ˜ë¥¼, ê°™ìœ¼ë©´ 0ì„, í¬ë©´ ì–‘ì˜ ì •ìˆ˜ë¥¼ ë°˜í™˜í•œë‹¤. ì´ ê°ì²´ì™€ ë¹„êµí•  ìˆ˜ ì—†ëŠ” íƒ€ì…ì˜ ê°ì²´ê°€ ì£¼ì–´ì§€ë©´ ClassCastExceptionì„ ë˜ì§„ë‹¤.
  - `ìˆœì„œë¥¼ ë°”ê¾¸ì–´ ë¹„êµí•´ë„ ê°™ì€ ê²°ê³¼ê°€ ë‚˜ì™€ì•¼ í•œë‹¤.`
 
- Comparableì„ êµ¬í˜„í•œ í´ë˜ìŠ¤ëŠ” ì¶”ì´ì„±ì„ ë³´ì¥í•´ì•¼ í•œë‹¤. ì¦‰, (x.compareTo(y) > 0 && y.compareTo(z) > 0) ì´ë©´ x.compareTo(z) > 0 ì´ë‹¤.

- Comparableì„ êµ¬í˜„í•œ í´ë˜ìŠ¤ëŠ” ëª¨ë“  zì— ëŒ€í•´ x.compareTo(y) == 0 ì´ë©´ sgn(x.compareTo(z)) == sgn(y.compareTo(z)) ì…ë‹ˆë‹¤.
  - `ì¦‰ x == yë¼ë©´, x.compareTo(anyObject)ì˜ ê²°ê³¼ì™€ y.compareTo(anyObject)ì˜ ê²°ê³¼ê°€ ê°™ì•„ì•¼ í•œë‹¤ëŠ” ëœ»ì´ë‹¤.`

- ì´ë²ˆ ê¶Œê³ ëŠ” í•„ìˆ˜ëŠ” ì•„ë‹ˆì§€ë§Œ ê¼­ ì§€í‚¤ëŠ” ê²ƒì´ ì¢‹ë‹¤. (x.compareTo(y) == 0) == (x.equals(y))ì—¬ì•¼ í•œë‹¤.
  - x, y ê°ì²´ê°€ ìˆì„ ë•Œ compareToë¡œ ê°™ë‹¤ê³  íŒë‹¨í•œë‹¤ë©´ equalsë¡œë„ ê°™ë‹¤ê³  íŒë‹¨í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤ëŠ” ëœ»ì´ë‹¤.
  
  - ë§Œì•½ ì´ ê·œì•½ì„ ì§€í‚¤ì§€ ì•Šìœ¼ë©´ í´ë˜ìŠ¤ì— ì´ ê·œì•½ì„ ì§€í‚¤ì§€ ì•Šì•˜ë‹¤ê³  ì•„ë˜ ë¬¸êµ¬ì²˜ëŸ¼ ì¨ì£¼ë©´ ë  ê²ƒì´ë‹¤.
  
  - `ì£¼ì˜: ì´ í´ë˜ìŠ¤ì˜ ìˆœì„œ (compareToë¡œ ë¹„êµí•œ ê²°ê³¼)ëŠ” equals ë©”ì„œë“œì˜ ê²°ê³¼ì™€ ì¼ê´€ë˜ì§€ ì•Šë‹¤.`
  
  - ì´ ê·œì•½ì„ ì§€í‚¤ì§€ ì•Šì€ ê²½ìš° í”„ë¡œê·¸ë¨ì€ ë™ì‘í•˜ë‚˜, ì´ë¯¸ ì •ì˜ëœ Set, Map, Collectionì— ì •ì˜ë˜ì–´ìˆëŠ” compareToë‚˜ equalsë¥¼ ì‚¬ìš©í•˜ëŠ” ë©”ì†Œë“œì—ì„œ ì˜¤ë¥˜ê°€ ìƒê¸¸ ìˆ˜ ìˆë‹¤. 
  
    - ì˜ˆë¥¼ ë“¤ì–´ HashMapì´ ìˆëŠ”ë° Aë¼ëŠ” ë©”ì†Œë“œì—ì„œ compareToë¡œ 2ê°œì˜ ê°ì²´ë¥¼ ê°™ë‹¤ê³  íŒë‹¨í–ˆë‹¤ê³  í•˜ì. ê·¸ëŸ°ë° Bë¼ëŠ” ë©”ì†Œë“œì—ì„œëŠ” equalsë¥¼ í™œìš©í•˜ì—¬ ë‹¤ë¥¸ ê°ì²´ë¼ê³  íŒë‹¨í•  ê²½ìš° í´ë¼ì´ì–¸íŠ¸ê°€ ì›í•˜ëŠ” ê²°ê³¼ê°€ ë‚˜ì˜¤ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤.
  
    - ì‹¤ì œë¡œ BigDecimal í´ë˜ìŠ¤ëŠ” compareToì™€ equalsê°€ ì¼ê´€ë˜ì§€ ì•Šë‹¤.

<br>

- ìœ„ì˜ ê·œì•½ì€ equalsì˜ ê·œì•½ê³¼ ë§¤ìš° ë¹„ìŠ·í•˜ë‹¤.
- ìƒì†ì„ ë°›ì€ ë¶€ëª¨, ìì‹ í´ë˜ìŠ¤ ê´€ê³„ ì‹œ equals ê·œì•½ì„ ì§€í‚¤ê¸° ì–´ë ¤ì› ë˜ ê²ƒì²˜ëŸ¼ compareToë„ ë˜‘ê°™ë‹¤.

  [equalsì˜ ê·œì•½ í™•ì¸í•˜ê¸°](https://github.com/TaemHam/effective-java-study/tree/main/3%EC%9E%A5/%EC%95%84%EC%9D%B4%ED%85%9C10)

<br>

### Comparable ì‘ì„± ìš”ë ¹

- ëŒ€ë¶€ë¶„ equalsì˜ ì‘ì„±ìš”ë ¹ê³¼ ë¹„ìŠ·í•˜ë‹¤.

- Comparableì€ ì œë„¤ë¦­ ì¸í„°í˜ì´ìŠ¤ì´ë¯€ë¡œ ì»´íŒŒì¼ ì‹œ íŒŒë¼ë¯¸í„° íƒ€ì…ì´ ì •í•´ì§„ë‹¤.

- ê·¸ë˜ì„œ íŒŒë¼ë¯¸í„° íƒ€ì…ì„ í™•ì¸í•  í•„ìš”ê°€ ì—†ëŠ” ì ì´ equalsì™€ ë‹¤ë¥´ë‹¤.

<br>

#### ì‘ì„± ìš”ë ¹ 1. Comparableë¥¼ ì´ìš©í•˜ì—¬ ìˆœì„œë¥¼ ë¹„êµí•œë‹¤.
- compareToëŠ” ê°ì²´ì˜ ë™ì¹˜ì„±ì´ ì•„ë‹Œ `ìˆœì„œ`ë¥¼ ë¹„êµí•˜ëŠ” ê²ƒì´ê¸° ë•Œë¬¸ì— ê°ì²´ì˜ ì°¸ì¡° í•„ë“œë¥¼ ë¹„êµí•˜ë ¤ë©´ ì°¸ì¡° í•„ë“œì˜ ë‚´ë¶€ë„ compareToë¡œ ê³„ì† í™•ì¸í•´ì•¼ í•œë‹¤. (compareTo ë©”ì„œë“œë¥¼ ì‚¬ìš©í•´ì„œ ì¬ê·€ì ìœ¼ë¡œ ë¹„êµí•œë‹¤ëŠ” ê²ƒì´ë‹¤.)

- Comparableë¥¼ êµ¬í˜„í•˜ì§€ ì•Šì€ í•„ë“œë‚˜ í‘œì¤€ì´ ì•„ë‹Œ ìˆœì„œë¡œ ë¹„êµí•´ì•¼ í•œë‹¤ë©´ (ì—­ìˆœ, ë‚´ê°€ ì›í•˜ëŠ” ì •ë ¬ ìˆœì„œ ë“±) Comparator ì¸í„°í˜ì´ìŠ¤ë¥¼ í™œìš©í•˜ì—¬ ìƒˆë¡œ êµ¬í˜„í•˜ê±°ë‚˜, ìë°”ê°€ ì œê³µí•˜ëŠ” APIë¥¼ ì“°ì.

  ``` java
  public int compareTo(CaseInsensitiveString cis) {
    return String.CASE_INSENSITIVE_ORDER.compare(s, cis.s);
  }
  ```
- ë°•ì‹± í•„ë“œ, Stringì—ë„ compareToê°€ ìˆìœ¼ë¯€ë¡œ í™œìš©í•˜ì.
  ``` java
  public int compareTo(CaseInsensitiveString cis) {
    // compareToIgnoreCase APIë„ ì‚¬ìš©ê°€ëŠ¥
    // return s.compareToIgnoreCase(cls.s);
    return String.CASE_INSENSITIVE_ORDER.compare(s, cis.s);
  }
  ```
  
#### ìë°” 7 ì´í›„ë¶€í„° ë°•ì‹±ëœ ê¸°ë³¸ íƒ€ì…ì—ëŠ” compareTo ë©”ì†Œë“œê°€ ìˆìœ¼ë¯€ë¡œ ê·¸ê²ƒì„ í™œìš©í•˜ì.
- ë°•ì‹±ëœ ê¸°ë³¸íƒ€ì…ì˜ compare ë©”ì„œë“œ ì˜ˆì œ
  
  ``` java
  Integer.compare(1, 2);

  Float.compare(1, 2);

  Double.compare(1, 2);

  Boolean.compare(true, false);
  ```

#### í´ë˜ìŠ¤ì— í•µì‹¬ í•„ë“œê°€ ì—¬ëŸ¬ ê°œë¼ë©´ ê·¸ ì¤‘ì—ì„œë„ ê°€ì¥ í•µì‹¬ í•„ë“œë¶€í„° ë¹„êµí•´ë‚˜ê°€ì.
- equalsì™€ ê±°ì˜ ë¹„ìŠ·í•œ êµ¬ì¡°ì´ë‹¤.
  
  ``` java
  public class PhoneNumber implements Comparable<PhoneNumber> {
      @Override
      public int compareTo(PhoneNumber phoneNumber) {
          int result = Short.compare(areaCode, phoneNumber.areaCode); // ê°€ì¥ ì¤‘ìš”í•œ í•„ë“œ
          if (result == 0) {
              result = Short.compare(prefix, phoneNumber.prefix); // ë‘ ë²ˆì§¸ë¡œ ì¤‘ìš”í•œ í•„ë“œ
              if (result == 0) {
                  result = Short.compare(lineNum, phoneNumber.lineNum); // ì„¸ ë²ˆì§¸ë¡œ ì¤‘ìš”í•œ í•„ë“œ
              }
          }
          return result;
      }
  }
  ```

#### ìë°” 8ë¶€í„° ë©”ì„œë“œ ì²´ì´ë‹ ë°©ì‹ìœ¼ë¡œ Comparatorë¥¼ ìƒì„±í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆë‹¤.
- ì•½ê°„ì˜ ì„±ëŠ¥ ì €í•˜ê°€ ìˆê¸´ í•˜ì§€ë§Œ ì½”ë“œê°€ ê¹”ë”í•´ì§„ë‹¤ëŠ” ì¥ì ì´ ìˆë‹¤.
  ``` java
  private static final Comparator<PhoneNumber> COMPARATOR =
        comparingInt((PhoneNumber pn) -> pn.areaCode)
            .thenComparingInt(pn -> pn.prefix)
            .thenComparingInt(pn -> pn.lineNum);

  public int compareTo(PhoneNumber pn) {
      return COMPARATOR.compare(this, pn);
  }
  ```

  > ğŸ“Œ **ë©”ì„œë“œ ì²´ì´ë‹ìœ¼ë¡œ Comparatorë¥¼ ì‚¬ìš©í•  ë•Œ ì„±ëŠ¥ì €í•˜ì— ê´€í•˜ì—¬**
  > - ìœ„ì˜ ì˜ˆì œì²˜ëŸ¼ ì´ 3ê°œì˜ ë¹„êµ ë©”ì„œë“œê°€ ì²´ì´ë‹ ë˜ì–´ìˆë‹¤ê³  í•˜ì.
  > - ì´ëŸ¬í•œ ê²½ìš° ì²«ë²ˆ ì§¸ ë©”ì†Œë“œ ì‹¤í–‰ í›„, ë‘ë²ˆ ì§¸, ì„¸ë²ˆ ì§¸ ë©”ì†Œë“œ ìˆœì„œë¡œ ì‹¤í–‰ëœë‹¤. ì¤‘ê°„ì— ì›í•˜ëŠ” ì •ë ¬ì´ ë§Œì¡±ë˜ì–´ë„ ë§ˆì§€ë§‰ ì—°ì‚°ê¹Œì§€ í•˜ë¯€ë¡œ ì„±ëŠ¥ì´ ì•½ê°„ ì €í•˜ë˜ëŠ” ê²ƒ ê°™ë‹¤. (ì‡¼íŠ¸ ì„œí‚·ì´ ì ìš©ë˜ì§€ ì•ŠìŒ)

  > - ê·¸ëŸ¬ë‚˜ êµ¬ê¸€ë§ ì‹œ ì„±ëŠ¥ ì €í•˜ì— ëŒ€í•œ ìë£Œê°€ ê±°ì˜ ë‚˜ì˜¤ì§€ ì•ŠëŠ” ê²ƒìœ¼ë¡œ ë³´ì•„ ì‹¤ì œë¡œëŠ” ë¯¸ë¯¸í•œ ì„±ëŠ¥ ì €í•˜ë¼ê³  ìƒê°ë˜ë©° ê°€ë…ì„±ì´ ë†’ì•„ì§„ë‹¤ëŠ” ì ì—ì„œ ë©”ì„œë“œ ì²´ì´ë‹ìœ¼ë¡œ ì‘ì„±í•˜ëŠ” ê²ƒì´ ì¢‹ì„ ê²ƒ ê°™ë‹¤ëŠ” ì˜ê²¬ì´ë‹¤.

  <br>
  
  [Comparator í™œìš©ë²• ì •ë¦¬ ë¸”ë¡œê·¸](https://veneas.tistory.com/entry/Java-%EC%9E%90%EB%B0%94-8-Comparator-API-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%A0%95%EB%A0%AC)